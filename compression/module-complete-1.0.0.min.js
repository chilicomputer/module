/*! gruntest 2014-06-17 */
!function(a){var b={};b.info="VERSION: 1.0.0 \n AUTHOR: liuping \n A Controller For Modules";var c={initFnName:"init",destroyFnName:"destroy",autoLoad:!0,sourceRoot:""};$BASE={},$BASE.unikey=function(a){for(var b="number"==typeof a?a:16,c="";c.length<b;c+=Math.random().toString(36).substr(2));return c.substr(0,b)},$BASE.trim=function(a){if("string"!=(typeof a).toLowerCase())return a;for(var b=a.length,c=/\s/,d=0;b>d&&c.test(a.charAt(d));d++);if(d>=b)return"";for(var e=b-1;e>=0;e--)if(!c.test(a.charAt(e))){e++;break}return a.slice(d,e)},$BASE.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},$BASE.isWhat=function(a,b){var c=typeof a;if("undefined"==c)return/^undefined$/i.test(b);var d=new RegExp(b,"gi");try{var e=a.constructor.toString();return d.test(e)}catch(f){return/^object$/i.test(c)&&/^null$/i.test(b)}},$BASE.parseObj=function(a,b,c){var d={};b=$BASE.isWhat(b,"object")?b:{};for(var e in a)if(d[e]=a[e],e in b){var f=b[e],g=parseFloat(f);c&&!isNaN(g)&&(f=g),d[e]=f}return d},$BASE.isNode=function(a,b){return a&&"number"==(typeof a.nodeType).toLowerCase()?b?a.nodeType==parseInt(b):!0:!1},$BASE.objLength=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},$BASE.getTime=function(a,b){var a=a||"/",c=new Date,d=parseInt(b);if(!isNaN(d)){var e=864e5*d;c=new Date(+c+e)}var f=c.getMonth()+1,g=c.getDate(),h=c.getMinutes(),i=c.getHours(),j=c.getSeconds(),k=c.getFullYear();f=f.toString().length<2?"0"+f:f,g=g.toString().length<2?"0"+g:g,i=i.toString().length<2?"0"+i:i,h=h.toString().length<2?"0"+h:h,j=j.toString().length<2?"0"+j:j;var l=[];l.push(k),l.push(f),l.push(g);var m=[];return m.push(i),m.push(h),m.push(j),l.join(a)+" "+m.join(":")},$BASE.extend=function(a,b){var c=function(){};return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a},$BASE.newClass=function(a,b){var c=b||function(){};if("object"==typeof a)for(var d in a)a.hasOwnProperty(d)&&(c.prototype[d]=a[d]);return c},$BASE.indexOf=function(a,b){return $BASE.isArray(b)?($BASE.indexOf="undefined"!=typeof b.indexOf?function(a,b){return b.indexOf(a)}:function(a,b){for(var c=-1,d=0;d<b.length;d++)if(b[d]===a){c=d;break}return c},$BASE.indexOf(a,b)):!1},$BASE.consoleLog=function(a){console&&console.log&&console.log(a)},$BASE.emptyFn=function(){},$BASE.removeNode=function(a){a.parentNode.removeChild(a)},$BASE.isDefined=function(a,b){a=$BASE.trim(a);var c;if(-1==a.indexOf("."))c=b[a];else{for(var d=a.split("."),e=b,f=0;f<d.length&&(e=e[d[f]],"undefined"!=typeof e);f++);c=e}return!!c};var d=$BASE,e={priorityQueue:{list:[],cbks:{}},historyQueue:[],busyState:{},globalLock:!1,addQueue:function(a,b){var c=d.parseObj({power:0,callBack:function(){}},b||{},!0);e.busyState[a]=!0,e.priorityQueue.list.splice(c.power,0,a),e.priorityQueue.cbks[a]||(e.priorityQueue.cbks[a]=[]),e.priorityQueue.cbks[a].push(c.callBack)},jsTagCreat:function(a){e.globalLock=!0;for(var b=d.parseObj({isAsyn:!0,isClear:!0},a||{});e.priorityQueue.list.length>0;){var f=e.priorityQueue.list.pop(),g=e.priorityQueue.cbks[f],h=document.createElement("script");h.type="text/javascript",h.defer=b.isAsyn,h.src=c.sourceRoot+f,b.isAsyn&&("onreadystatechange"in h?h.onreadystatechange=function(){var a=h.readyState;if("loaded"==a.toLowerCase()||"complete"==a.toLowerCase()){for(var c=0,i=g.length;i>c;c++)g[c](f);delete e.priorityQueue.cbks[f],e.busyState[f]=!1,b.isClear&&d.removeNode(h),e.historyQueue.push(f)}}:h.onload=function(){for(var a=0,c=g.length;c>a;a++)g[a](f);delete e.priorityQueue.cbks[f],e.busyState[f]=!1,b.isClear&&d.removeNode(h),e.historyQueue.push(f)}),document.body.appendChild(h)}0==e.priorityQueue.list.length&&(e.globalLock=!1)},loader:function(a,b){if(!d.isArray(a)){var a=d.trim(a),c=d.parseObj({isAsyn:!0,power:0,isClear:!0,callBack:function(){}},b||{},!0);return-1!=d.indexOf(a,e.historyQueue)?void c.callBack(a):void(e.priorityQueue.cbks[a]?e.addQueue(a,c):(e.addQueue(a,c),e.globalLock||e.jsTagCreat(c)))}for(var f=0;f<a.length;f++)e.loader(a[f],b)}},f=function(){var a={},b={};this.push=function(c,e,f){var h="";if(e.constructor==g)h=e.mName||d.unikey();else{if("string"!=typeof e)throw"MSG pushing error!";h=e}var i="__MSG__"+h,j=f.mName,k={data:c,sender:j,receiver:h},l=b[i]?b[i].length:0;if(!l)return a[i]?a[i].push(k):a[i]=[k],i;for(var m=0;l>m;m++){var n=b[i][m];n&&n(k)}},this.get=function(b){var c="";if(b.constructor==g)c=b.mName;else{if("string"!=typeof b)throw"MSG getting error!";c=b}if(c){var d="__MSG__"+c,e=a[d];return a[d]=[],e&&e.length?e:void 0}},this.addHandler=function(a,c){var d="";if(a.constructor==g)d=a.mName;else{if("string"!=typeof a)throw"MSG adding handler error!";d=a}if(d){var e="__MSG__"+d;b[e]?b[e].push(c):b[e]=[c]}},this.delHandler=function(a,c){var d="";if(a.constructor==g)d=a.mName;else{if("string"!=typeof a)throw"MSG deleting handler error!";d=a}if(d){var e="__MSG__"+d,f=0;if(b[e]&&(f=b[e].length))if(c)for(var h=0;f>h;h++)b[e][h]==c&&b[e].splice(h,0,1);else b[e]=[]}}},g=function(a){var b={};this.skipRecord=function(a,c){a&&(b[a]=!!c)},this.needSkip=function(a){var c=!1;return b.hasOwnProperty(a)&&(c=b[a]),c},this.mName=a,this.rLink=[],this.logList=[],this.interface={},this.__tailState=!1,this.mUsable=!0},h={},i={},j=new f;g.prototype.tailLog=function(a){"undefined"==typeof a&&(a=!0),a&&!this.__tailState&&a&&this.showLog(),this.__tailState=a},g.prototype.log=function(a,b){var c=d.getTime("-"),e="LOG["+(b||"normal")+"]:"+a+" At "+c+"\n";this.__tailState&&d.consoleLog(e),this.logList[this.logList.length]=e},g.prototype.showLog=function(){var a=this.logList.join("");return d.consoleLog(a),a},g.prototype.tools=d,g.prototype.build=function(){if(!this.mUsable)return void this.log('No permission for "building"!',"Error");var a,b={};switch(typeof arguments[0]){case"object":b=arguments[0],a=arguments[1],"string"==typeof arguments[2]&&(arguments[0].hasOwnProperty(arguments[2])?b[arguments[2]]=arguments[0][arguments[2]]:b={});break;case"string":b[arguments[0]]=arguments[1],a=arguments[2];break;default:return void this.log('Illegal param for "building"',"Error")}for(var c in b)if(b.hasOwnProperty(c)){if(this.hasOwnProperty(c)){if(!a){this.log('Repeat define for "'+c+'"',"Error");continue}this.log('Repeat define for "'+c+'"',"Warning")}this[c]="function"==typeof b[c]&&b.constructor!=g?function(){return"process"!=this.__tailState||this.needSkip(c)||this.log("Running:"+(this.mName||"anonymity")+"."+c,"Record"),b[c].apply(this,arguments)}:b[c],this.log('Success define for "'+c+'"',"Success")}return this},g.prototype.mSend=function(a,b){try{j.push(a,b,this),this.log("Sending data from "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error sending from "+this.mName||"anonymity","Error")}},g.prototype.mMonitor=function(a,b){try{j.addHandler(b||this,a),this.log("Adding monitor in "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error monitor in "+this.mName||"anonymity","Error")}},g.prototype.mUnmonitor=function(a,b){try{j.delHandler(b||this,a),this.log("Deleting monitor in "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error unmonitor in "+this.mName||"anonymity","Error")}},g.prototype.interfaceDefine=function(a,b,c){if(arguments.length<2)return void this.log("Param illegal for Interface defining","Error");if(this.interface.hasOwnProperty(a)){if(!c)return void this.log('Repeat interface defining for "'+a+'"',"Error");this.log('Repeat interface defining for "'+a+'"',"Warning")}"string"==typeof b&&(b=[b]);var d=[];for(var e in b)"string"==typeof b[e]?d.push(b[e]):this.log("Illegal interface methods name for defining!","Error");return this.interface[a]=d,this.log('Success defining for interface "'+a+'"',"Success"),d},g.prototype.interfaceCheck=function(a){var b=[];if("string"==typeof a){if(!this.interface.hasOwnProperty(a))return this.log('The interface name of "'+a+'" is not exist!',"Failure"),!1;b=this.interface[a]}else{if(!d.isWhat(a,"array"))return this.log("Illegal params for interface checking!","Error"),!1;b=a}for(var c=b.length,e=[],f=0;c>f;f++)b[f]in this||e.push(b[f]);return e.length?e:!1},g.prototype.require=function(a,b){h[a]?h[a].link.push({state:"off",module:this}):(h[a]={src:b},h[a].link=[{state:"off",module:this}]),-1==d.indexOf(a,this.rLink)&&this.rLink.push(a)},b.modules={},b.define=function(a){a=d.trim(a);var c=new g(a);if(-1==a.indexOf(".")){if(a in b.modules)throw"Repeat define for "+a;b.modules[a]=c}else{for(var e=a.split("."),f=b.modules,h=0;h<e.length-1;h++)f=f[e[h]]=e[h]in f?f[e[h]]:{};f[e.pop()]=c}return c},b.create=function(a,f){a=d.trim(a);var g;if(-1==a.indexOf("."))g=b.modules[a];else{for(var j=a.split("."),k=b.modules,l=0;l<j.length&&(k=k[j[l]],"undefined"!=typeof k);l++);g=k}if(g){for(var l=0,m=g.rLink.length;m>l;l++)if(!d.isDefined(g.rLink[l],b.modules))return c.autoLoad?void e.loader(h[g.rLink[l]].src,{callBack:function(){b.create(a,f)}}):(g.log("Rely lost for "+g.rLink[l],"Warning"),!1);return d.isArray(f)||(f=[f]),i[g.mName]=g[c.initFnName]&&g[c.initFnName].apply(g,f),i[g.mName]||!0}if(h[a])return c.autoLoad?void e.loader(h[a].src,{callBack:function(){b.create(a)}}):!1;throw"Invalid Input for "+a},b.destroy=function(a){a&&i[a]&&i[a][c.destroyFnName]&&(i[a][c.destroyFnName](),delete i[a])},b.options=function(){var a={};switch(arguments.length){case 2:a[arguments[0]]=arguments[1];break;case 1:a=arguments[0];break;default:return!1}return c=d.paramObj(c,a),!0},b.newM=function(a){return new g(a)},a.$M=b}(window);