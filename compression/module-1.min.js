/*! gruntest 2014-06-16 */
!function(a){var b={};b.info="VERSION: 1.0.0 \n AUTHOR: liuping \n A Controller For Modules";var c={priorityQueue:[],historyQueue:[],busyState:{},globalLock:!1,addQueue:function(a,b){var e=d.parseObj({power:0},b||{},!0);c.busyState[a]=!0;var f={src:a};c.priorityQueue.splice(e.power,0,f)},jsTagCreat:function(a){c.globalLock=!0;for(var b=d.parseObj({isAsyn:!0,callBack:function(){},isClear:!0},a||{});c.priorityQueue.length>0;){var e=c.priorityQueue.pop(),f=document.createElement("script");f.type="text/javascript",f.defer=b.isAsyn,f.src=e.src,b.isAsyn&&("onreadystatechange"in f?f.onreadystatechange=function(){var a=f.readyState;("loaded"==a.toLowerCase()||"complete"==a.toLowerCase())&&(b.callBack(e.src),c.busyState[e.src]=!1,b.isClear&&d.removeNode(f))}:f.onload=function(){b.callBack(e.src),c.busyState[e.src]=!1,b.isClear&&d.removeNode(f)}),document.body.appendChild(f)}0==c.priorityQueue.length&&(c.globalLock=!1)},loader:function(a,b){if(d.isArray(a))for(var e=0;e<a.length;e++)c.loader(a[e],b);else{var a=d.trim(a);if(-1!=d.indexOf(a,c.historyQueue))return!1;var f=d.parseObj({isAsyn:!0,power:0,isClear:!0,callBack:function(){}},b||{},!0);c.historyQueue.push(a),c.addQueue(a,f),c.globalLock||c.jsTagCreat(f)}}},d=a.basetools,e={initFnName:"init",destroyFnName:"destroy",autoLoad:!0},f=function(){var a={},b={};this.push=function(c,e,f){var h="";if(e.constructor==g)h=e.mName||d.unikey();else{if("string"!=typeof e)throw"MSG pushing error!";h=e}var i="__MSG__"+h,j=f.mName,k={data:c,sender:j,receiver:h},l=b[i]?b[i].length:0;if(!l)return a[i]?a[i].push(k):a[i]=[k],i;for(var m=0;l>m;m++){var n=b[i][m];n&&n(k)}},this.get=function(b){var c="";if(b.constructor==g)c=b.mName;else{if("string"!=typeof b)throw"MSG getting error!";c=b}if(c){var d="__MSG__"+c,e=a[d];return a[d]=[],e&&e.length?e:void 0}},this.addHandler=function(a,c){var d="";if(a.constructor==g)d=a.mName;else{if("string"!=typeof a)throw"MSG adding handler error!";d=a}if(d){var e="__MSG__"+d;b[e]?b[e].push(c):b[e]=[c]}},this.delHandler=function(a,c){var d="";if(a.constructor==g)d=a.mName;else{if("string"!=typeof a)throw"MSG deleting handler error!";d=a}if(d){var e="__MSG__"+d,f=0;if(b[e]&&(f=b[e].length))if(c)for(var h=0;f>h;h++)b[e][h]==c&&b[e].splice(h,0,1);else b[e]=[]}}},g=function(a){var b={};this.skipRecord=function(a,c){a&&(b[a]=!!c)},this.needSkip=function(a){var c=!1;return b.hasOwnProperty(a)&&(c=b[a]),c},this.mName=a,this.rLink=[],this.logList=[],this.interface={},this.__tailState=!1,this.mUsable=!0},h={},i={},j=new f;g.prototype.tailLog=function(a){"undefined"==typeof a&&(a=!0),a&&!this.__tailState&&a&&this.showLog(),this.__tailState=a},g.prototype.log=function(a,b){var c=d.getTime("-"),e="LOG["+(b||"normal")+"]:"+a+" At "+c+"\n";this.__tailState&&d.consoleLog(e),this.logList[this.logList.length]=e},g.prototype.showLog=function(){var a=this.logList.join("");return d.consoleLog(a),a},g.prototype.tools=d,g.prototype.build=function(){if(!this.mUsable)return void this.log('No permission for "building"!',"Error");var a,b={};switch(typeof arguments[0]){case"object":b=arguments[0],a=arguments[1],"string"==typeof arguments[2]&&(arguments[0].hasOwnProperty(arguments[2])?b[arguments[2]]=arguments[0][arguments[2]]:b={});break;case"string":b[arguments[0]]=arguments[1],a=arguments[2];break;default:return void this.log('Illegal param for "building"',"Error")}for(var c in b)if(b.hasOwnProperty(c)){if(this.hasOwnProperty(c)){if(!a){this.log('Repeat define for "'+c+'"',"Error");continue}this.log('Repeat define for "'+c+'"',"Warning")}this[c]="function"==typeof b[c]&&b.constructor!=g?function(){return"process"!=this.__tailState||this.needSkip(c)||this.log("Running:"+(this.mName||"anonymity")+"."+c,"Record"),b[c].apply(this,arguments)}:b[c],this.log('Success define for "'+c+'"',"Success")}return this},g.prototype.mSend=function(a,b){try{j.push(a,b,this),this.log("Sending data from "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error sending from "+this.mName||"anonymity","Error")}},g.prototype.mMonitor=function(a,b){try{j.addHandler(b||this,a),this.log("Adding monitor in "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error monitor in "+this.mName||"anonymity","Error")}},g.prototype.mUnmonitor=function(a,b){try{j.delHandler(b||this,a),this.log("Deleting monitor in "+this.mName||"anonymity success!","Success")}catch(c){this.log("Error unmonitor in "+this.mName||"anonymity","Error")}},g.prototype.interfaceDefine=function(a,b,c){if(arguments.length<2)return void this.log("Param illegal for Interface defining","Error");if(this.interface.hasOwnProperty(a)){if(!c)return void this.log('Repeat interface defining for "'+a+'"',"Error");this.log('Repeat interface defining for "'+a+'"',"Warning")}"string"==typeof b&&(b=[b]);var d=[];for(var e in b)"string"==typeof b[e]?d.push(b[e]):this.log("Illegal interface methods name for defining!","Error");return this.interface[a]=d,this.log('Success defining for interface "'+a+'"',"Success"),d},g.prototype.interfaceCheck=function(a){var b=[];if("string"==typeof a){if(this.interface.hasOwnProperty(a))return this.log('The interface name of "'+a+'" is not exist!',"Failure"),!1;b=this.interface[a]}else{if(!d.isWhat(a,"array"))return this.log("Illegal params for interface checking!","Error"),!1;b=a}for(var c=b.length,e=[],f=0;c>f;f++)b[f]in this||e.push(b[f]);return e.length?e:!1},g.prototype.require=function(a,b){h[a]?h[a].link.push({state:"off",module:this}):(h[a]={src:b},h[a].link=[{state:"off",module:this}]),-1==d.indexOf(a,this.rLink)&&this.rLink.push(a)},b.modules={},b.define=function(a){a=d.trim(a);var c=new g(a);if(-1==a.indexOf(".")){if(a in b.modules)throw"Repeat define for "+a;b.modules[a]=c}else{for(var e=a.split("."),f=b.modules,h=0;h<e.length-1;h++)f=f[e[h]]=e[h]in f?f[e[h]]:{};f[e.pop()]=c}return c},b.create=function(a,f){a=d.trim(a);var g;if(-1==a.indexOf("."))g=b.modules[a];else{for(var j=a.split("."),k=b.modules,l=0;l<j.length&&(k=k[j[l]],"undefined"!=typeof k);l++);g=k}if(g){for(var l=0,m=g.rLink.length;m>l;l++)if(!d.isDefined(g.rLink[l],b.modules))return e.autoLoad?void c.loader(h[g.rLink[l]].src,{callBack:function(){b.create(a,f)}}):(g.log("Rely lost for "+g.rLink[l],"Warning"),!1);return d.isArray(f)||(f=[f]),i[g.mName]=g[e.initFnName]&&g[e.initFnName].apply(g,f),i[g.mName]||!0}if(h[a])return e.autoLoad?void c.loader(h[a].src,{callBack:function(){b.create(a)}}):!1;throw"Invalid Input for "+a},b.destroy=function(a){a&&i[a]&&i[a][e.destroyFnName]&&(i[a][e.destroyFnName](),delete i[a])},b.options=function(){var a={};switch(arguments.length){case 2:a[arguments[0]]=arguments[1];break;case 1:a=arguments[0];break;default:return!1}return e=d.paramObj(e,a),!0},b.newM=function(a){return new g(a)},a.$M=b}(window);